// Code generated by tui generate. DO NOT EDIT.
// Source: sidebar.gsx

package main

import (
	tui "github.com/grindlemire/go-tui"
)

type sidebar struct {
	Query    *tui.State[string]
	expanded *tui.State[bool]
}

func Sidebar(query *tui.State[string]) *sidebar {
	return &sidebar{
		Query:    query,
		expanded: tui.NewState(true),
	}
}

func (s *sidebar) KeyMap() tui.KeyMap {
	return tui.KeyMap{
		tui.OnKey(tui.KeyCtrlB, s.toggle),
	}
}

func (s *sidebar) toggle(ke tui.KeyEvent) {
	s.expanded.Set(!s.expanded.Get())
}

func (s *sidebar) Render() *tui.Element {
	__tui_0 := tui.New()
	if s.expanded.Get() {
		__tui_1 := tui.New(
			tui.WithDirection(tui.Column),
			tui.WithBorder(tui.BorderSingle),
			tui.WithPadding(1),
			tui.WithWidth(30),
		)
		__tui_2 := tui.New(
			tui.WithText("Sidebar"),
			tui.WithTextStyle(tui.NewStyle().Bold()),
		)
		__tui_1.AddChild(__tui_2)
		if s.Query.Get() != "" {
			__tui_3 := tui.New()
			__tui_4 := tui.New(tui.WithText("Filtering:"))
			__tui_3.AddChild(__tui_4)
			__tui_5 := tui.New(tui.WithText(s.Query.Get()))
			__tui_3.AddChild(__tui_5)
			__tui_1.AddChild(__tui_3)
		}
		__tui_6 := tui.New(
			tui.WithText("Ctrl+B to toggle"),
			tui.WithTextStyle(tui.NewStyle().Dim()),
		)
		__tui_1.AddChild(__tui_6)
		__tui_0.AddChild(__tui_1)
	}

	return __tui_0
}
