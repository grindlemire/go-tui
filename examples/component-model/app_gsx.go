// Code generated by tui generate. DO NOT EDIT.
// Source: app.gsx

package main

import (
	tui "github.com/grindlemire/go-tui"
)

type myApp struct {
	searchActive *tui.State[bool]
	query        *tui.State[string]
}

func MyApp() *myApp {
	return &myApp{
		searchActive: tui.NewState(false),
		query:        tui.NewState(""),
	}
}

func (a *myApp) KeyMap() tui.KeyMap {
	km := tui.KeyMap{
		tui.OnKey(tui.KeyCtrlC, func(ke tui.KeyEvent) { tui.Stop() }),
	}
	if !a.searchActive.Get() {
		km = append(km, tui.OnRune('/', func(ke tui.KeyEvent) {
			a.searchActive.Set(true)
		}))
	}
	return km
}

func (a *myApp) Render() *tui.Element {
	__tui_0 := tui.New(
		tui.WithDirection(tui.Row),
	)
	__tui_1 := tui.Mount(a, 0, func() tui.Component {
		return Sidebar(a.query)
	})
	__tui_0.AddChild(__tui_1)
	__tui_2 := tui.New(
		tui.WithDirection(tui.Column),
		tui.WithFlexGrow(1),
	)
	__tui_3 := tui.Mount(a, 1, func() tui.Component {
		return SearchInput(a.searchActive, a.query)
	})
	__tui_2.AddChild(__tui_3)
	__tui_4 := tui.New(
		tui.WithFlexGrow(1),
		tui.WithPadding(1),
	)
	__tui_5 := tui.New(
		tui.WithText("Press/to search.Ctrl+B toggles sidebar.Ctrl+C quits."),
	)
	__tui_4.AddChild(__tui_5)
	__tui_2.AddChild(__tui_4)
	__tui_0.AddChild(__tui_2)

	return __tui_0
}
